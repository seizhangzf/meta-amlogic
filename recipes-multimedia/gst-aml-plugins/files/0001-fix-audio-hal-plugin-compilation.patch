From b8c3d77d59186614b9939e45c08c9c625132d6cb Mon Sep 17 00:00:00 2001
From: Song Zhao <song.zhao@amlogic.com>
Date: Wed, 13 May 2020 15:41:00 -0700
Subject: [PATCH] fix audio hal plugin compilation

---
 gst-aml-plugins-1.0/Makefile.am  | 6 +-----
 gst-aml-plugins-1.0/configure.ac | 6 ------
 2 files changed, 1 insertion(+), 11 deletions(-)

diff --git a/gst-aml-plugins-1.0/Makefile.am b/gst-aml-plugins-1.0/Makefile.am
index 284b311..e80e9a4 100644
--- a/gst-aml-plugins-1.0/Makefile.am
+++ b/gst-aml-plugins-1.0/Makefile.am
@@ -1,7 +1,3 @@
-SUBDIRS = common video/amlvdec video/amlvsink audio/amladec audio/amlasink
-
-if AML_AUDIO_HAL_SINK_ENABLE
-SUBDIRS += audio/aml_audio_hal_sink
-endif
+SUBDIRS = audio/aml_audio_hal_sink
 
 EXTRA_DIST = autogen.sh
diff --git a/gst-aml-plugins-1.0/configure.ac b/gst-aml-plugins-1.0/configure.ac
index 431a9cb..1994fe1 100755
--- a/gst-aml-plugins-1.0/configure.ac
+++ b/gst-aml-plugins-1.0/configure.ac
@@ -8,7 +8,6 @@ dnl required versions of gstreamer and plugins-base
 GST_REQUIRED=1.0.0
 GSTPB_REQUIRED=1.0.0
 
-AC_CONFIG_SRCDIR([video/amlvdec/gstamlvdec.c])
 AC_CONFIG_HEADERS([config.h])
 
 dnl required version of automake
@@ -93,11 +92,6 @@ GST_PLUGIN_LDFLAGS='-module -avoid-version -export-symbols-regex [_]*\(gst_\|Gst
 AC_SUBST(GST_PLUGIN_LDFLAGS)
 
 AC_CONFIG_FILES([Makefile
-common/Makefile
-video/amlvdec/Makefile
-video/amlvsink/Makefile
-audio/amladec/Makefile
-audio/amlasink/Makefile
 audio/aml_audio_hal_sink/Makefile])
 AC_OUTPUT
 
-- 
2.24.1

