From 7fe9e6014edd6a770cb3f89de17990c24d62c870 Mon Sep 17 00:00:00 2001
From: Pradeep Sriram <pradeep.sriram@amlogic.com>
Date: Fri, 18 Oct 2019 14:55:57 -0700
Subject: [PATCH] yocto compile fixes

---
 test/am_av_test/Makefile       | 2 +-
 test/am_ci_test/Makefile       | 2 +-
 test/am_db_test/Makefile       | 0
 test/am_dmx_test/Makefile      | 2 +-
 test/am_dsc_test/Makefile      | 2 +-
 test/am_dvr_test/Makefile      | 2 +-
 test/am_epg_test/Makefile      | 2 +-
 test/am_fend_test/Makefile     | 2 +-
 test/am_scan_test/Makefile     | 2 +-
 test/am_smc_test/Makefile      | 3 +--
 test/am_userdata_test/Makefile | 2 +-
 11 files changed, 10 insertions(+), 11 deletions(-)
 mode change 100755 => 100644 test/am_db_test/Makefile

diff --git a/test/am_av_test/Makefile b/test/am_av_test/Makefile
index f2c6fcc..a8d4559 100755
--- a/test/am_av_test/Makefile
+++ b/test/am_av_test/Makefile
@@ -20,7 +20,7 @@ SRC_FILES = am_av_test.c
 CFLAGS   := -c -Wall -Wno-unknown-pragmas -Wno-format -O3 -fexceptions -fnon-call-exceptions
 
 CFLAGS += $(LOCAL_C_INCLUDES) $(DEFINES)
-LDFLAGS  := -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lamavutils -lpthread
+LDFLAGS  := $(TARGET_LDFLAGS) -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lamavutils -lpthread
 
 all : $(OBJS) $(OUTPUT)
 
diff --git a/test/am_ci_test/Makefile b/test/am_ci_test/Makefile
index db0f013..4aad478 100644
--- a/test/am_ci_test/Makefile
+++ b/test/am_ci_test/Makefile
@@ -20,7 +20,7 @@ SRC_FILES = am_ci_test.c
 CFLAGS   := -c -Wall -Wno-unknown-pragmas -Wno-format -O3 -fexceptions -fnon-call-exceptions
 
 CFLAGS += $(LOCAL_C_INCLUDES) $(DEFINES)
-LDFLAGS  := -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lam_mw -lamavutils -lpthread -lzvbi
+LDFLAGS  := $(TARGET_LDFLAGS) -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lam_mw -lamavutils -lpthread -lzvbi
 
 all : $(OBJS) $(OUTPUT)
 
diff --git a/test/am_db_test/Makefile b/test/am_db_test/Makefile
old mode 100755
new mode 100644
diff --git a/test/am_dmx_test/Makefile b/test/am_dmx_test/Makefile
index 8a1b8c6..309535c 100755
--- a/test/am_dmx_test/Makefile
+++ b/test/am_dmx_test/Makefile
@@ -20,7 +20,7 @@ SRC_FILES = am_dmx_test.c
 CFLAGS   := -c -Wall -Wno-unknown-pragmas -Wno-format -O3 -fexceptions -fnon-call-exceptions
 
 CFLAGS += $(LOCAL_C_INCLUDES) $(DEFINES)
-LDFLAGS  := -L$(TARGET_DIR)/usr/lib -lam_adp -lamavutils
+LDFLAGS  := $(TARGET_LDFLAGS) -L$(TARGET_DIR)/usr/lib -lam_adp -lamavutils
 
 all : $(OBJS) $(OUTPUT)
 
diff --git a/test/am_dsc_test/Makefile b/test/am_dsc_test/Makefile
index 303b992..fd3f625 100755
--- a/test/am_dsc_test/Makefile
+++ b/test/am_dsc_test/Makefile
@@ -20,7 +20,7 @@ SRC_FILES = am_dsc_test.c
 CFLAGS   := -c -Wall -Wno-unknown-pragmas -Wno-format -O3 -fexceptions -fnon-call-exceptions
 
 CFLAGS += $(LOCAL_C_INCLUDES) $(DEFINES)
-LDFLAGS  := -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lamavutils
+LDFLAGS  := $(TARGET_LDFLAGS) -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lamavutils
 
 all : $(OBJS) $(OUTPUT)
 
diff --git a/test/am_dvr_test/Makefile b/test/am_dvr_test/Makefile
index a073833..8a3680a 100644
--- a/test/am_dvr_test/Makefile
+++ b/test/am_dvr_test/Makefile
@@ -20,7 +20,7 @@ SRC_FILES = am_dvr_test.c
 CFLAGS   := -c -Wall -Wno-unknown-pragmas -Wno-format -O3 -fexceptions -fnon-call-exceptions
 
 CFLAGS += $(LOCAL_C_INCLUDES) $(DEFINES)
-LDFLAGS  := -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lamavutils -lpthread
+LDFLAGS  := $(TARGET_LDFLAGS) -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lamavutils -lpthread
 
 all : $(OBJS) $(OUTPUT)
 
diff --git a/test/am_epg_test/Makefile b/test/am_epg_test/Makefile
index ca20f45..f13a7bc 100755
--- a/test/am_epg_test/Makefile
+++ b/test/am_epg_test/Makefile
@@ -20,7 +20,7 @@ SRC_FILES = am_epg_test.c
 CFLAGS   := -c -Wall -Wno-unknown-pragmas -Wno-format -O3 -fexceptions -fnon-call-exceptions
 
 CFLAGS += $(LOCAL_C_INCLUDES) $(DEFINES)
-LDFLAGS  := -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lam_mw -lamavutils -lpthread -lzvbi
+LDFLAGS  := $(TARGET_LDFLAGS) -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lam_mw -lamavutils -lpthread -lzvbi
 
 all : $(OBJS) $(OUTPUT)
 
diff --git a/test/am_fend_test/Makefile b/test/am_fend_test/Makefile
index 95cd79c..bbcfc55 100755
--- a/test/am_fend_test/Makefile
+++ b/test/am_fend_test/Makefile
@@ -20,7 +20,7 @@ SRC_FILES = am_fend_test.c
 CFLAGS   := -c -Wall -Wno-unknown-pragmas -Wno-format -O3 -fexceptions -fnon-call-exceptions
 
 CFLAGS += $(LOCAL_C_INCLUDES) $(DEFINES)
-LDFLAGS  := -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lamavutils
+LDFLAGS  := $(TARGET_LDFLAGS) -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lamavutils
 
 all : $(OBJS) $(OUTPUT)
 
diff --git a/test/am_scan_test/Makefile b/test/am_scan_test/Makefile
index 97257b6..db8673f 100755
--- a/test/am_scan_test/Makefile
+++ b/test/am_scan_test/Makefile
@@ -20,7 +20,7 @@ SRC_FILES = am_scan_test.c
 CFLAGS   := -c -Wall -Wno-unknown-pragmas -Wno-format -O3 -fexceptions -fnon-call-exceptions
 
 CFLAGS += $(LOCAL_C_INCLUDES) $(DEFINES)
-LDFLAGS  := -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lam_mw -lamavutils -lsqlite3 -lzvbi
+LDFLAGS  := $(TARGET_LDFLAGS) -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lam_mw -lamavutils -lsqlite3 -lzvbi
 
 all : $(OBJS) $(OUTPUT)
 
diff --git a/test/am_smc_test/Makefile b/test/am_smc_test/Makefile
index 5426c33..733cfa3 100755
--- a/test/am_smc_test/Makefile
+++ b/test/am_smc_test/Makefile
@@ -20,8 +20,7 @@ SRC_FILES = am_smc_test.c
 CFLAGS   := -c -Wall -Wno-unknown-pragmas -Wno-format -O3 -fexceptions -fnon-call-exceptions
 
 CFLAGS += $(LOCAL_C_INCLUDES) $(DEFINES)
-LDFLAGS  := -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lamavutils
-
+LDFLAGS  := $(TARGET_LDFLAGS) -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lamavutils 
 all : $(OBJS) $(OUTPUT)
 
 $(OBJS) : %.o : %.c
diff --git a/test/am_userdata_test/Makefile b/test/am_userdata_test/Makefile
index 81d60c0..85f9df1 100755
--- a/test/am_userdata_test/Makefile
+++ b/test/am_userdata_test/Makefile
@@ -20,7 +20,7 @@ SRC_FILES = am_userdata_test.c
 CFLAGS   := -c -Wall -Wno-unknown-pragmas -Wno-format -O3 -fexceptions -fnon-call-exceptions
 
 CFLAGS += $(LOCAL_C_INCLUDES) $(DEFINES)
-LDFLAGS  := -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lamavutils
+LDFLAGS  := $(TARGET_LDFLAGS) -L$(TARGET_DIR)/usr/lib -lam_adp -lamadec -lamavutils
 
 all : $(OBJS) $(OUTPUT)
 
-- 
2.7.4

