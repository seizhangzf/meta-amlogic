From 8b8518cd4eb1a45b9eb70f4934f138a9f1b33a3f Mon Sep 17 00:00:00 2001
From: "ufo.chang" <ufo.chang@amlogic.com>
Date: Sat, 5 Oct 2019 09:27:34 +0800
Subject: [PATCH 2/2] Pull high GPIOAO_6 to power-up AMP.

Change-Id: I231d2b75556753270d31f4980c1783d262c9ba0d
Signed-off-by: Ufo Chang <ufo.chang@amlogic.com>
---
 board/amlogic/tm2_t962x3_ab301_v1/tm2_t962x3_ab301_v1.c | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/board/amlogic/tm2_t962x3_ab301_v1/tm2_t962x3_ab301_v1.c b/board/amlogic/tm2_t962x3_ab301_v1/tm2_t962x3_ab301_v1.c
index 6675a32..cd2d96b 100644
--- a/board/amlogic/tm2_t962x3_ab301_v1/tm2_t962x3_ab301_v1.c
+++ b/board/amlogic/tm2_t962x3_ab301_v1/tm2_t962x3_ab301_v1.c
@@ -573,6 +573,13 @@ int board_init(void)
 	val = readl(AO_GPIO_O);
 	val |= 1 << 3;
 	writel(val, AO_GPIO_O);
+
+       //AMP PD GPIOAO_06
+       writel(readl(AO_GPIO_O_EN_N) & (~(1 << 6)), AO_GPIO_O_EN_N);
+    
+       val = readl(AO_GPIO_O);
+       val |= 1 << 6;
+       writel(val, AO_GPIO_O);
     //Please keep CONFIG_AML_V2_FACTORY_BURN at first place of board_init
     //As NOT NEED other board init If USB BOOT MODE
 #ifdef CONFIG_AML_V2_FACTORY_BURN
-- 
2.7.4

