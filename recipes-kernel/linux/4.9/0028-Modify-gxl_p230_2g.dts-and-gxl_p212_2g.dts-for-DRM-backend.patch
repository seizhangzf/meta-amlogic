From 2b0cf59211639185aee49a3aa8a7f5bfd877caee Mon Sep 17 00:00:00 2001
From: Mingyen Hung <mingyen.hung@amlogic.com>
Date: Thu, 2 Nov 2017 18:39:36 +0800
Subject: [PATCH] Modify gxl_p230_2g.dts and gxl_p212_2g.dts for DRM backend

Make most part of dts the same as that of p212

Signed-off-by: Mingyen Hung <mingyen.hung@amlogic.com>
---
 arch/arm64/boot/dts/amlogic/gxl_p230_2g.dts | 20 ++++++--------------
 1 file changed, 6 insertions(+), 14 deletions(-)

diff --git a/arch/arm64/boot/dts/amlogic/gxl_p230_2g.dts b/arch/arm64/boot/dts/amlogic/gxl_p230_2g.dts
index 5e8558f95878..131bae4c7c24 100644
--- a/arch/arm64/boot/dts/amlogic/gxl_p230_2g.dts
+++ b/arch/arm64/boot/dts/amlogic/gxl_p230_2g.dts
@@ -64,14 +64,13 @@
 			reg = <0x0 0x05300000 0x0 0x2000000>;
 			no-map;
 		};
-		logo_reserved:linux,meson-fb {
+		ion_reserved:linux,ion-dev {
 			compatible = "shared-dma-pool";
 			reusable;
-			size = <0x0 0x800000>;
+			size = <0x0 0x8000000>;
 			alignment = <0x0 0x400000>;
-			alloc-ranges = <0x0 0x7f800000 0x0 0x800000>;
 		};
-		//don't put other dts in front of logo_reserved
+		//don't put other dts in front of fb_reserved
  
 		//di_reserved:linux,di {
 		//	compatible = "amlogic, di-mem";
@@ -86,13 +85,6 @@
 			size = <0x0 0x2000000>;
 			alignment = <0x0 0x400000>;
 		};
-		ion_reserved:linux,ion-dev {
-			compatible = "shared-dma-pool";
-			reusable;
-			size = <0x0 0x2000000>;
-			alignment = <0x0 0x400000>;
-		};
-
 		/*  vdin0 CMA pool */
 		//vdin0_cma_reserved:linux,vdin0_cma {
 		//	compatible = "shared-dma-pool";
@@ -119,7 +111,8 @@
 		codec_mm_cma:linux,codec_mm_cma {
 			compatible = "shared-dma-pool";
 			reusable;
-			size = <0x0 0x10400000>;
+			/* ion_codec_mm max can alloc size 80M*/
+			size = <0x0 0x13400000>;
 			alignment = <0x0 0x400000>;
 			linux,contiguous-region;
 		};
@@ -684,9 +677,8 @@
 
 	meson-fb {
 		compatible = "amlogic, meson-fb";
-		memory-region = <&logo_reserved>;
 		dev_name = "meson-fb";
-		status = "okay";
+		status = "disable";
 		interrupts = <0 3 1
 			0 89 1>;
 		interrupt-names = "viu-vsync", "rdma";
-- 
2.11.0

diff --git a/arch/arm64/boot/dts/amlogic/gxl_p212_2g.dts b/arch/arm64/boot/dts/amlogic/gxl_p212_2g.dts
index d032e619dc09..41430f320203 100644
--- a/arch/arm64/boot/dts/amlogic/gxl_p212_2g.dts
+++ b/arch/arm64/boot/dts/amlogic/gxl_p212_2g.dts
@@ -694,7 +694,7 @@
 	meson-fb {
 		compatible = "amlogic, meson-fb";
 		dev_name = "meson-fb";
-		status = "okay";
+		status = "disable";
 		interrupts = <0 3 1
 			0 89 1>;
 		interrupt-names = "viu-vsync", "rdma";
