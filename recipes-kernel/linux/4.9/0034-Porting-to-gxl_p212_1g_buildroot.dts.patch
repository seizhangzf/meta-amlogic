From 59f5e405b3505da3c095836e0e8be5851283d272 Mon Sep 17 00:00:00 2001
From: Mingyen Hung <mingyen.hung@amlogic.com>
Date: Thu, 4 Oct 2018 18:39:25 +0800
Subject: [PATCH] Porting to gxl_p212_1g_buildroot.dts

Signed-off-by: Mingyen Hung <mingyen.hung@amlogic.com>
---
 arch/arm64/boot/dts/amlogic/gxl_p212_1g_buildroot.dts | 11 +++++------
 1 file changed, 5 insertions(+), 6 deletions(-)

diff --git a/arch/arm64/boot/dts/amlogic/gxl_p212_1g_buildroot.dts b/arch/arm64/boot/dts/amlogic/gxl_p212_1g_buildroot.dts
index 13fb0af0c2a7..4a763f3e3519 100644
--- a/arch/arm64/boot/dts/amlogic/gxl_p212_1g_buildroot.dts
+++ b/arch/arm64/boot/dts/amlogic/gxl_p212_1g_buildroot.dts
@@ -37,6 +37,7 @@
 	};
 	ion_dev {
 		compatible = "amlogic, ion_dev";
+		memory-region = <&ion_reserved>;
 	};
 	memory@00000000 {
 		device_type = "memory";
@@ -61,12 +62,11 @@
 			reg = <0x0 0x05300000 0x0 0x2000000>;
 			no-map;
 		};
-		fb_reserved:linux,meson-fb {
+		ion_reserved:linux,ion-dev {
 			compatible = "shared-dma-pool";
 			reusable;
-			size = <0x0 0x2400000>;
+			size = <0x0 0x4000000>;
 			alignment = <0x0 0x400000>;
-			alloc-ranges = <0x0 0x3dc00000 0x0 0x2400000>;
 		};
 		//don't put other dts in front of fb_reserved
 
@@ -542,8 +542,8 @@
 			&clkc CLKID_USB1_TO_DDR
 			&clkc CLKID_USB1>;
 		clock-names = "usb_general",
-						"usb1",
-						"usb1_to_ddr";
+			"usb1",
+			"usb1_to_ddr";
 	};
 
 	meson-amvideom {
@@ -718,7 +718,6 @@
 
 	meson-fb {
 		compatible = "amlogic, meson-gxl";
-		memory-region = <&fb_reserved>;
 		dev_name = "meson-fb";
 		status = "okay";
 		interrupts = <0 3 1
-- 
2.11.0

