From 2358b1e24c26b06ee8d228f277049e3b86e7be1d Mon Sep 17 00:00:00 2001
From: Blance Tang <guofeng.tang@amlogic.com>
Date: Wed, 7 Apr 2021 12:25:49 +0800
Subject: [PATCH 1/3] RDK: Adopt rdk flash layout

Signed-off-by: Blance Tang <guofeng.tang@amlogic.com>
Change-Id: I8eb307c932801fc138c97538eb2b596d0c89fe96
---
 .../dts/amlogic/partition_normal_linux.dtsi   | 72 +++++++++++++------
 1 file changed, 50 insertions(+), 22 deletions(-)

diff --git a/arch/arm64/boot/dts/amlogic/partition_normal_linux.dtsi b/arch/arm64/boot/dts/amlogic/partition_normal_linux.dtsi
index 775e565f24aa..52a097d7e0e8 100644
--- a/arch/arm64/boot/dts/amlogic/partition_normal_linux.dtsi
+++ b/arch/arm64/boot/dts/amlogic/partition_normal_linux.dtsi
@@ -12,23 +12,27 @@
 
 / {
     partitions: partitions{
-		parts = <16>;
+		parts = <20>;
 		part-0 = <&logo>;
 		part-1 = <&recovery>;
 		part-2 = <&misc>;
 		part-3 = <&cri_data>;
 		part-4 = <&param>;
-		part-5 = <&boot>;
-		part-6 = <&rsv>;
-		part-7 = <&tee>;
-		part-8 = <&factory>;
-		part-9 = <&vendor>;
-		part-10 = <&vbmeta>;
-		part-11 = <&odm>;
-		part-12 = <&system>;
-		part-13 = <&product>;
-		part-14 = <&cache>;
-		part-15 = <&data>;
+		part-5 = <&boot_a>;
+		part-6 = <&boot_b>;
+		part-7 = <&rsv>;
+		part-8 = <&tee>;
+		part-9 = <&factory>;
+		part-10 = <&vendor_a>;
+		part-11 = <&vendor_b>;
+		part-12 = <&odm>;
+		part-13 = <&system_a>;
+		part-14 = <&system_b>;
+		part-15 = <&product>;
+		part-16 = <&cache>;
+		part-17 = <&vbmeta_a>;
+		part-18 = <&vbmeta_b>;
+		part-19 = <&data>;
 
 		logo:logo{
 			pname = "logo";
@@ -61,9 +65,15 @@
 			size = <0x0 0x1000000>;
 			mask = <2>;
 		};
-		boot:boot
+		boot_a:boot_a
 		{
-			pname = "boot";
+			pname = "boot_a";
+			size = <0x0 0x4000000>;
+			mask = <1>;
+		};
+		boot_b:boot_b
+		{
+			pname = "boot_b";
 			size = <0x0 0x4000000>;
 			mask = <1>;
 		};
@@ -77,16 +87,16 @@
 			size = <0x0 0x800000>;
 			mask = <0x11>;
 		};
-		vendor:vendor
+		vendor_a:vendor_a
 		{
-			pname = "vendor";
+			pname = "vendor_a";
 			size = <0x0 0x1C000000>;
 			mask = <1>;
 		};
-		vbmeta:vbmeta
+		vendor_b:vendor_b
 		{
-			pname = "vbmeta";
-			size = <0x0 0x200000>;
+			pname = "vendor_b";
+			size = <0x0 0x1C000000>;
 			mask = <1>;
 		};
 		odm:odm
@@ -95,10 +105,16 @@
 			size = <0x0 0x8000000>;
 			mask = <1>;
 		};
-		system:system
+		system_a:system_a
+		{
+			pname = "system_a";
+			size = <0x0 0x96000000>;
+			mask = <1>;
+		};
+		system_b:system_b
 		{
-			pname = "system";
-			size = <0x0 0x40000000>;
+			pname = "system_b";
+			size = <0x0 0x96000000>;
 			mask = <1>;
 		};
 		product:product{
@@ -112,6 +128,18 @@
 			size = <0x0 0x46000000>;
 			mask = <2>;
 		};
+		vbmeta_a:vbmeta_a
+		{
+			pname = "vbmeta_a";
+			size = <0x0 0x200000>;
+			mask = <1>;
+		};
+		vbmeta_b:vbmeta_b
+		{
+			pname = "vbmeta_b";
+			size = <0x0 0x200000>;
+			mask = <1>;
+		};
 		data:data
 		{
 			pname = "data";
-- 
2.31.1

